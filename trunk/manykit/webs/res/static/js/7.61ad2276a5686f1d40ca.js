webpackJsonp([7],{"5H7t":function(t,a){},ONva:function(t,a,s){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var e=s("YtJ0"),i=s("Prqi"),r=s("W7vi"),n={name:"PersonSet",data:function(){return{fileInfo:{userid:this.$store.state.userid,state:1},fileList:[],uploadSrc:r.a.userinfo,headimg:"",isFouce:"",tag:"",aboutme:"",tags:[],username:"",userid:"",taglist:["Q版手绘","硬建模","日系风格","美漫风格","韩系风格","中国风","写实风格","二次元","中世纪","武侠风格","蒸汽朋克","赛博朋克","室内设计","工业设计","舞美设计","游戏设计","3ds_Max","Cinema-4D","Maya","Modo","Mudbox","Photoshop","Softimage","Substance","Unity","Unreal","VRay","ZBrush"]}},store:e.a,methods:{addTag:function(){return["","undefind","null"].includes(this.tag)?(this.Message("标签不合法","warning"),!1):this.tags.includes(this.tag)?(this.Message("标签已经存在","warning"),!1):this.tags.length>=10?(this.Message("最多可以添加10个标签","warning"),!1):(this.tags.push(this.tag),void(this.tag=""))},deleteTag:function(t){this.tags.splice(t,1)},subAddTag:function(t){return console.log(t),this.tags.includes(t)?(this.Message("标签已经存在","warning"),!1):this.tags.length>=10?(this.Message("最多可以添加10个标签","warning"),!1):void this.tags.push(t)},saveSet:function(){var t=this;this.$store.state.userid;if(this.fileInfo.aboutme=this.aboutme,this.fileInfo.tags=this.tags,0===this.fileList.length){var a=this.$store.state.userid;i.a.ajaxPost(r.a.userinfo,{state:1,userid:a,aboutme:this.aboutme,tags:this.tags,headportrait:!0},function(a){200===a.data.status?a.data.data?t.Message("保存成功","success"):t.Message("保存失败","warning"):t.Message(a.data.errmsg,"warning")})}else this.$refs.uploadHead.submit()},changeFile:function(t,a){a.length>1&&(a=a.splice(0,1)),this.fileList=a,this.headimg=t.url},uploadSuccess:function(){this.Message("保存成功","success")},uploadError:function(){this.Message("保存失败","warning")}},mounted:function(){var t=this,a=this.$store.state.userid;i.a.ajaxPost(r.a.userinfo,{getinfostate:1,userid:a},function(a){t.aboutme=a.data.data.aboutme,a.data.data.tags&&(t.tags=a.data.data.tags),t.username=a.data.data.username,t.userid=a.data.data.userid,console.log(a.data.data),a.data.data.headportrait&&(t.headimg=a.data.data.headportrait)})}},o={render:function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{attrs:{id:"person-set"}},[s("aside",{staticClass:"fl"},[s("div",{staticClass:"large-headportrait"},[s("div",[s("img",{attrs:{src:t.headimg,alt:"",onerror:"javascript:this.src=window.errorImg"}})]),t._v(" "),s("div",{staticClass:"upload-headportrait"},[s("span",[t._v("更换头像")]),t._v(" "),s("el-upload",{ref:"uploadHead",staticClass:"upload-demo",attrs:{action:t.uploadSrc,data:t.fileInfo,"show-file-list":!1,"on-change":t.changeFile,"auto-upload":!1,"on-success":t.uploadSuccess,"on-error":t.uploadError}},[s("el-button",{attrs:{size:"small",type:"primary"}},[t._v("点击上传")]),t._v(" "),s("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v("只能上传jpg/png文件，且不超过500kb")])],1)],1),t._v(" "),s("div",{staticClass:"info-text"},[t._v("支持PNG,JPG,GIF,文件小于1M")])]),t._v(" "),s("div",{staticClass:"middle-headportrait"},[s("div",[s("img",{attrs:{src:t.headimg,alt:"",onerror:"javascript:this.src=window.errorImg"}})]),t._v(" "),s("div",{staticClass:"info-text"},[t._v("120*120")])]),t._v(" "),s("div",{staticClass:"small-headportrait"},[s("div",[s("img",{attrs:{src:t.headimg,alt:"",onerror:"javascript:this.src=window.errorImg"}})]),t._v(" "),s("div",{staticClass:"info-text"},[t._v("60*60")])])]),t._v(" "),s("section",{staticClass:"fl"},[s("div",{staticClass:"row clear"},[s("label",{staticClass:"fl"},[t._v("昵称")]),t._v(" "),s("input",{attrs:{type:"text",disabled:"true"},domProps:{value:t.username}})]),t._v(" "),s("div",{staticClass:"row clear"},[s("label",{staticClass:"fl"},[t._v("一句话介绍")]),t._v(" "),s("span",{staticClass:"fr"},[t._v("请输入1-40个字符的介绍")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.aboutme,expression:"aboutme"}],attrs:{type:"text"},domProps:{value:t.aboutme},on:{input:function(a){a.target.composing||(t.aboutme=a.target.value)}}})]),t._v(" "),s("div",{staticClass:"row clear"},[s("label",{staticClass:"fl"},[t._v("擅长领域&技能")]),t._v(" "),s("div",{staticClass:"el-input"},[s("div",{class:[{getFocus:t.isFouce},"tag_box"]},[t._l(t.tags,function(a,e){return s("div",{key:e,staticClass:"tag"},[s("span",[t._v(t._s(a))]),t._v(" "),s("span",{staticClass:"iconfont icon-cuowu",on:{click:function(a){t.deleteTag(e)}}})])}),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.tag,expression:"tag"}],staticClass:"tagInput",attrs:{type:"text",placeholder:"输入标签,回车确认"},domProps:{value:t.tag},on:{keydown:function(a){return"button"in a||!t._k(a.keyCode,"enter",13,a.key,"Enter")?t.addTag(a):null},input:function(a){a.target.composing||(t.tag=a.target.value)}}})],2)])]),t._v(" "),s("div",{staticClass:"row clear"},[s("ul",{staticClass:"tag-list clear"},t._l(t.taglist,function(a,e){return s("li",{key:e,staticClass:"li-tag",on:{click:function(s){t.subAddTag(a)}}},[t._v(t._s(a))])}))]),t._v(" "),s("div",{staticClass:"row clear"},[s("button",{staticClass:"save-btn fl cur",on:{click:t.saveSet}},[t._v("保存")])])])])},staticRenderFns:[]};var l=s("VU/8")(n,o,!1,function(t){s("5H7t"),s("a2Gk")},"data-v-3c2990e2",null);a.default=l.exports},a2Gk:function(t,a){}});
//# sourceMappingURL=7.61ad2276a5686f1d40ca.js.map