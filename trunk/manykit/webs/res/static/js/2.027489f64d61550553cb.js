webpackJsonp([2],{AjZR:function(e,l){},Qr1c:function(e,l){},Zlza:function(e,l){},jL5U:function(e,l){},mvHQ:function(e,l,a){e.exports={default:a("qkKv"),__esModule:!0}},qkKv:function(e,l,a){var t=a("FeBl"),i=t.JSON||(t.JSON={stringify:JSON.stringify});e.exports=function(e){return i.stringify.apply(i,arguments)}},"ti/9":function(e,l,a){"use strict";Object.defineProperty(l,"__esModule",{value:!0});var t=a("tn5I"),i=a("mvHQ"),s=a.n(i),n=a("YtJ0"),o=a("Prqi"),u=a("W7vi"),d={data:function(){return{isFouce:!1,labelPosition:"top",selectedOptions:[],fileInfo:{title:"",filetype:"",tags:"",desc:"",userid:"",state:2},options:[{value:"人物",label:"人物",children:[{value:"女性",label:"女性"},{value:"男性",label:"男性"},{value:"卡通女性",label:"卡通女性"},{value:"卡通男性",label:"卡通男性"},{value:"虚拟人物",label:"虚拟人物"},{value:"机器人",label:"机器人"},{value:"异性怪物",label:"异性怪物"},{value:"人体器官",label:"人体器官"}]},{value:"动物",label:"动物",children:[{value:"哺乳",label:"哺乳"},{value:"爬行",label:"爬行"},{value:"飞禽",label:"飞禽"},{value:"昆虫",label:"昆虫"},{value:"鱼类",label:"鱼类"},{value:"恐龙",label:"恐龙"},{value:"机器动物",label:"机器动物"}]},{value:"植物",label:"植物",children:[{value:"树木",label:"树木"},{value:"草类",label:"草类"},{value:"花卉",label:"花卉"},{value:"水果蔬菜",label:"水果蔬菜"}]},{value:"载具",label:"载具",children:[{value:"汽车",label:"汽车"},{value:"自行车",label:"自行车"},{value:"摩托车",label:"摩托车"},{value:"飞机",label:"飞机"},{value:"火车",label:"火车"},{value:"船只",label:"船只"},{value:"宇宙飞船",label:"宇宙飞船"},{value:"车辆部件",label:"车辆部件"}]},{value:"室外",label:"室外",children:[{value:"历史古迹",label:"历史古迹"},{value:"城市场景",label:"城市场景"},{value:"自然场景",label:"自然场景"},{value:"地标建筑",label:"地标建筑"},{value:"公共设施",label:"公共设施"},{value:"私人住宅",label:"私人住宅"},{value:"商业办公",label:"商业办公"},{value:"科幻场景",label:"科幻场景"}]},{value:"室内",label:"室内",children:[{value:"餐厅",label:"餐厅"},{value:"客厅",label:"客厅"},{value:"卧室",label:"卧室"},{value:"书房",label:"书房"},{value:"厨房",label:"厨房"},{value:"卫浴",label:"卫浴"},{value:"阳台",label:"阳台"}]},{value:"家具",label:"家具",children:[{value:"椅子",label:"椅子"},{value:"桌子",label:"桌子"},{value:"沙发",label:"沙发"},{value:"柜子",label:"柜子"},{value:"床",label:"床"},{value:"灯具",label:"灯具"},{value:"门窗",label:"门窗"}]},{value:"军用",label:"军用",children:[{value:"冷兵器",label:"冷兵器"},{value:"枪支",label:"枪支"},{value:"火炮",label:"火炮"},{value:"装甲车",label:"装甲车"},{value:"战斗机",label:"战斗机"},{value:"军舰",label:"军舰"},{value:"潜艇",label:"潜艇"}]},{value:"电子",label:"电子",children:[{value:"生活电器",label:"生活电器"},{value:"手机设备",label:"手机设备"},{value:"电脑设备",label:"电脑设备"},{value:"摄像设备",label:"摄像设备"}]},{value:"其他",label:"其他",children:[{value:"雕塑",label:"雕塑"},{value:"食品",label:"食品"},{value:"餐具",label:"餐具"},{value:"乐器",label:"乐器"},{value:"服饰",label:"服饰"},{value:"日用品",label:"日用品"},{value:"珠宝首饰",label:"珠宝首饰"},{value:"体育用品",label:"体育用品"},{value:"工业机械",label:"工业机械"},{value:"其他",label:"其他"}]}],taglist:[],tag:""}},store:n.a,methods:{handleChange:function(e){this.fileInfo.filetype=e[0]+"-"+e[1]},saveModule:function(){var e=this;0!==this.taglist.length&&(this.fileInfo.tags=s()(this.taglist));var l=this.$route.params.id,a=(this.$store.state.userid,this.fileInfo.title),t=this.fileInfo.filetype,i=this.fileInfo.tags,n=this.fileInfo.desc;o.a.ajaxPost(u.a.dealmodule,{id:l,title:a,filetype:t,tags:i,desc:n,state:0},function(l){200===l.data.status&&l.data.data&&e.Message("保存成功","success")})},pubishModule:function(){var e=this,l=this.$route.params.id,a=this.$store.state.userid,t=this.fileInfo.title,i=this.fileInfo.filetype,s=this.fileInfo.tags,n=this.fileInfo.desc;o.a.ajaxPost(u.a.dealmodule,{id:l,title:t,filetype:i,tags:s,desc:n,state:1},function(l){200===l.data.status&&l.data.data&&(e.Message("发布成功","success"),e.$router.push("/mine/"+a))})},getFocus:function(){this.isFouce=!0},getBlur:function(){this.isFouce=!1},addTag:function(){return["","undefind","null"].includes(this.tag)?(this.Message("标签不合法","warning"),!1):this.taglist.includes(this.tag)?(this.Message("标签已经存在","warning"),!1):(this.taglist.push(this.tag),this.tag="",void console.log(this.taglist))},deleteTag:function(e){this.taglist.splice(e,1),console.log(this.taglist)}},mounted:function(){var e=this,l=this.$route.params.id;if(!l)return this.$route.push("/404"),!1;o.a.ajaxPost(u.a.getmodule,{id:l,state:0,type:1},function(l){console.log(l.data.data),e.$emit("modelInfo",{modelsrc:l.data.data.modelsrc,mimetype:l.data.data.mimetype}),e.fileInfo.title=l.data.data.title,e.selectedOptions=[l.data.data.filetype.split("-")[0],l.data.data.filetype.split("-")[1]],e.fileInfo.tags=l.data.data.tags,e.fileInfo.desc=l.data.data.desc,l.data.data.tags&&(e.taglist=JSON.parse(l.data.data.tags))})}},r={render:function(){var e=this,l=e.$createElement,a=e._self._c||l;return a("div",{attrs:{id:"draft"}},[a("aside",[a("div",{staticClass:"person-oprate"},[a("el-button",{directives:[{name:"moduleQuit",rawName:"v-moduleQuit",value:{userid:this.$store.state.userid},expression:"{userid:this.$store.state.userid}"}]},[e._v("退出")]),e._v(" "),a("el-button",{on:{click:e.saveModule}},[e._v("保存")]),e._v(" "),a("el-button",{on:{click:e.pubishModule}},[e._v("发布")])],1),e._v(" "),a("div",[a("el-form",{staticClass:"fileinfo",attrs:{"label-position":e.labelPosition,"label-width":"80px",model:e.fileInfo}},[a("el-form-item",{attrs:{label:"标题"}},[a("el-input",{model:{value:e.fileInfo.title,callback:function(l){e.$set(e.fileInfo,"title",l)},expression:"fileInfo.title"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"分类"}},[a("el-cascader",{attrs:{"expand-trigger":"hover",options:e.options},on:{change:e.handleChange},model:{value:e.selectedOptions,callback:function(l){e.selectedOptions=l},expression:"selectedOptions"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"标签"}},[a("div",{staticClass:"el-input"},[a("div",{class:[{getFocus:e.isFouce},"tag_box"]},[e._l(e.taglist,function(l,t){return a("div",{key:t,staticClass:"tag"},[a("span",[e._v(e._s(l))]),e._v(" "),a("span",{staticClass:"iconfont icon-cuowu",on:{click:function(l){e.deleteTag(t)}}})])}),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.tag,expression:"tag"}],staticClass:"tagInput",attrs:{type:"text",placeholder:"输入标签,回车确认"},domProps:{value:e.tag},on:{focus:e.getFocus,blur:e.getBlur,keydown:function(l){return"button"in l||!e._k(l.keyCode,"enter",13,l.key,"Enter")?e.addTag(l):null},input:function(l){l.target.composing||(e.tag=l.target.value)}}})],2)])]),e._v(" "),a("el-form-item",{attrs:{label:"描述"}},[a("el-input",{attrs:{type:"textarea",rows:3,placeholder:"简单的描述下你的作品,让你的作品更受欢迎哦!"},model:{value:e.fileInfo.desc,callback:function(l){e.$set(e.fileInfo,"desc",l)},expression:"fileInfo.desc"}})],1)],1)],1)])])},staticRenderFns:[]};var c=a("VU/8")(d,r,!1,function(e){a("Qr1c"),a("AjZR")},"data-v-6342ab24",null).exports,v={data:function(){return{modelInfo:"",dataInfo:{state:2,id:this.$route.params.id}}},components:{model:t.a,draft:c},methods:{getmodelinfo:function(e){this.modelInfo=e},success:function(){this.Message("封面图上传成功","success")}}},f={render:function(){var e=this.$createElement,l=this._self._c||e;return l("div",{staticClass:"draft"},[l("div",{staticClass:"model-content"},[l("model",{staticClass:"fl",attrs:{childModelInfo:this.modelInfo}}),this._v(" "),l("el-upload",{attrs:{action:"/api/material/uploadHeadPortrait",limit:1,data:this.dataInfo,"on-success":this.success}},[l("el-button",[this._v("上传封面图")])],1)],1),this._v(" "),l("draft",{staticClass:"fr",on:{modelInfo:this.getmodelinfo}})],1)},staticRenderFns:[]};var b=a("VU/8")(v,f,!1,function(e){a("Zlza")},"data-v-8732ce5a",null);l.default=b.exports},tn5I:function(e,l,a){"use strict";var t={render:function(){var e=this.$createElement,l=this._self._c||e;return l("div",{attrs:{id:"model"}},["fbx"==this.childModelInfo.mimetype?l("iframe",{attrs:{src:"http://www.manykit.com/model/static/model/fbx/index.html",frameborder:"0","data-src":this.childModelInfo.modelsrc,id:"modeliframe"}}):this._e(),this._v(" "),"stl"==this.childModelInfo.mimetype?l("iframe",{attrs:{src:"http://www.manykit.com/model/static/model/stl/index.html",frameborder:"0","data-src":this.childModelInfo.modelsrc,id:"modeliframe"}}):this._e()])},staticRenderFns:[]};var i=a("VU/8")({props:["childModelInfo"],data:function(){return{}}},t,!1,function(e){a("jL5U")},"data-v-47cefc93",null);l.a=i.exports}});
//# sourceMappingURL=2.027489f64d61550553cb.js.map