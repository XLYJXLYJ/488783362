webpackJsonp([1],{CM9r:function(t,e){},OUAt:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=s("Dd8w"),i=s.n(a),n=s("YtJ0"),o=s("Prqi"),r=s("W7vi"),c=s("NYxO"),d={data:function(){return{content:""}},store:n.a,methods:i()({},Object(c.b)(["setResourceid"]),{addComment:function(){var t=this,e=this.$route.params.id,s=this.$store.state.userid,a=this.$store.state.replyInfo.resourcetitle;o.a.ajaxPost(r.a.commentmodule,{resourceid:e,commentatorid:s,bycommentatorid:s,type:1,content:this.content,resourcetitle:a},function(e){200==e.data.status?e.data.data?(t.Message("评论成功","success"),t.content=""):e.data.errmsg&&t.Message(errmsg,"error"):500==e.data.status&&t.Message(errmsg,"error")})},comment:function(){var t=this,e=this.$store.state.userid,s=this.$store.state.username,a=this.$store.state.replyInfo;o.a.ajaxPost(r.a.commentmodule,{resourceid:a.resourceid,commentatorid:e,commentatorname:s,bycommentatorid:a.authid,type:a.type,index:a.index,content:this.content,resourcetitle:a.resourcetitle},function(e){console.log(e.data),200==e.data.status?e.data.data?(t.Message("评论成功","success"),t.content=""):e.data.errmsg&&t.Message(errmsg,"error"):500==e.data.status&&t.Message(errmsg,"error")})},quitReply:function(){this.$emit("cancel"),this.commnetText=""}})},l={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"commnet-text"}},[t._m(0),t._v(" "),s("div",[s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.content,expression:"content"}],attrs:{name:"",id:"",cols:"30",rows:"10"},domProps:{value:t.content},on:{keydown:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.addComment(e):null},input:function(e){e.target.composing||(t.content=e.target.value)}}})]),t._v(" "),s("div",{staticClass:"btnBox"},[s("el-button",{on:{click:t.quitReply}},[t._v("取消")]),t._v(" "),s("el-button",{attrs:{type:"primary"},on:{click:t.comment}},[t._v("评论")])],1)])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("img",{attrs:{src:s("n618"),alt:""}})])}]};var m=s("VU/8")(d,l,!1,function(t){s("RqPp")},"data-v-3d3b2aee",null).exports,u=s("c/Tr"),f=s.n(u),v={data:function(){return{lists:[],total:0,replyInfo:{bycommentatorid:"",type:""},isReply:[],userid:this.$store.state.userid}},store:n.a,props:["comment"],methods:i()({},Object(c.b)(["setReplyInfo"]),{setErrorImg:function(t){errorImg(t)},changeCommenter:function(t,e){this.$emit("change",t,e)},setbool:function(t,e,s){this.$set(this.isReply[t[0]],t[1],!0),this.setReplyInfo(e)},resetComment:function(){var t=this.$store.state.replyInfo.oindex,e=this.$store.state.replyInfo.tindex;this.$set(this.isReply[t],e,!1)}}),components:{CommentTextarea:m},mounted:function(){var t=this,e=this.$route.params.id;o.a.ajaxPost(r.a.getcomment,{id:e},function(e){if(console.log(e.data.data),200===e.data.status)if(e.data.data){t.lists=e.data.data.data;var s=e.data.data.total?e.data.data.total:0;t.$emit("commnetTotal",s),t.total=e.data.data.total,f()(t.lists,function(e){var s,a=e.reply.length+1,i=new Array(a).fill(!1),n=[];n[0]=i,(s=t.isReply).push.apply(s,n)})}else t.Message(e.data.errmsg,"warning");else t.Message(e.data.errmsg,"warning")})}},p={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"comment-content"},[s("ul",{staticClass:"review-list"},t._l(t.lists,function(e,a){return s("li",{key:a},[s("div",{staticClass:"review-person"},[s("img",{attrs:{src:e.headportrait,alt:"",onerror:"javascript:this.src=window.errorImg"}}),t._v(" "),s("span",[t._v(t._s(e.username))])]),t._v(" "),s("div",{staticClass:"review-content"},[t._v(t._s(e.content))]),t._v(" "),s("div",{staticClass:"review-reply-box"},[s("span",{staticClass:"review-time"},[t._v(t._s(e.comment_time))]),t._v(" "),t.userid==e.commentatorid||t.isReply[a][0]?t._e():s("span",{directives:[{name:"reply",rawName:"v-reply",value:{replyIndex:[a,0],replyInfo:{bycommentatorid:e.commentatorid,type:2,index:e.index},set:t.setbool,reset:t.resetComment},expression:"{replyIndex:[index,0],replyInfo:{'bycommentatorid':list.commentatorid,'type':2,'index':list.index},set:setbool,reset:resetComment}"}],staticClass:"review-reply fr cur"},[t._v("回复")])]),t._v(" "),t.isReply[a][0]?s("CommentTextarea",{staticClass:"replyBox",on:{cancel:t.resetComment}}):t._e(),t._v(" "),s("hr"),t._v(" "),e.reply.length>=0?s("ul",{staticClass:"sub-list"},t._l(e.reply,function(e,i){return s("li",{key:i},[s("div",{staticClass:"review-person"},[s("img",{attrs:{src:e.headportrait,alt:"",onerror:"javascript:this.src=window.errorImg"}}),t._v(" "),s("span",[t._v(t._s(e.username))])]),t._v(" "),s("div",{staticClass:"review-content"},[t._v(t._s(e.content))]),t._v(" "),s("div",{staticClass:"review-reply-box"},[s("span",{staticClass:"review-time"},[t._v(t._s(e.comment_time))]),t._v(" "),t.userid==e.commentatorid||t.isReply[a][i+1]?t._e():s("span",{directives:[{name:"reply",rawName:"v-reply",value:{replyIndex:[a,i+1],replyInfo:{bycommentatorid:e.commentatorid,type:2,index:e.index},set:t.setbool,reset:t.resetComment},expression:"{replyIndex:[index,subindex+1],replyInfo:{'bycommentatorid':sublist.commentatorid,'type':2,'index':sublist.index},set:setbool,reset:resetComment}"}],staticClass:"review-reply fr cur"},[t._v("回复")])]),t._v(" "),t.isReply[a][i+1]?s("CommentTextarea",{on:{cancel:function(e){t.resetComment()}}}):t._e(),t._v(" "),s("hr")],1)})):t._e()],1)}))])},staticRenderFns:[]};var h=s("VU/8")(v,p,!1,function(t){s("CM9r"),s("f/TE")},"data-v-96328b9e",null).exports,_={props:["commentinfo"],data:function(){return{id:n.a.state.id,content:"",total:""}},store:n.a,methods:i()({},Object(c.b)(["changedialogLogin"]),{changeComment:function(t,e){this.oldComment=t,this.choseIndex=e,this.type=1},cancelComment:function(){this.type=0},commentSelf:function(){var t=this,e=this.$store.state.userid,s=this.$store.state.username,a=this.$store.state.replyInfo;o.a.ajaxPost(r.a.commentmodule,{resourceid:a.resourceid,commentatorid:e,commentatorname:s,bycommentatorid:a.authid,type:1,content:this.content,resourcetitle:a.resourcetitle},function(e){console.log(e.data),200==e.data.status?e.data.data?(t.Message("评论成功","success"),t.content=""):e.data.errmsg&&t.Message(errmsg,"error"):500==e.data.status&&t.Message(errmsg,"error")})},getTotal:function(t){this.total=t}}),components:{CommentTextarea:m,CommentContent:h}},g={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"review-section"}},[s("p",{staticClass:"review-title"},[t._v("评论("+t._s(t.total)+")")]),t._v(" "),s("div",{staticClass:"publish-review"},[this.$store.state.userid?t._e():s("div",{staticClass:"review-islogin"},[t._v("发表评论前请先"),s("button",{on:{click:t.changedialogLogin}},[t._v("登录")])]),t._v(" "),this.$store.state.userid?s("div",{staticClass:"review-func"},[s("div",[s("img",{attrs:{src:this.$store.state.userheadportrait,alt:"",onerror:"javascript:this.src=window.errorImg"}})]),t._v(" "),s("div",[s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.content,expression:"content"}],attrs:{name:"",id:"",cols:"30",rows:"10"},domProps:{value:t.content},on:{keydown:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.commentSelf(e):null},input:function(e){e.target.composing||(t.content=e.target.value)}}})])]):t._e(),t._v(" "),s("hr")]),t._v(" "),s("CommentContent",{on:{commnetTotal:t.getTotal}})],1)},staticRenderFns:[]};var y=s("VU/8")(_,g,!1,function(t){s("zac6")},"data-v-41c0c623",null).exports,C=s("tn5I"),w={name:"WorkShow",data:function(){return{info:{},modelInfo:{},fileTypeO:"",fileTypeT:"",isAuth:!1,commentinfo:{id:"",authid:""}}},store:n.a,components:{comment:y,model:C.a},methods:i()({},Object(c.b)(["setResourceid","setResourcetitle","setResourceAuthid"]),{handleCommand:function(t){var e=this.info.id,s=this.$store.state.userid,a=this;"delete"===t?this.Confirm("是否确认确认删除?","提示",{confirmmessage:"删除成功",isShowMessage:!1,confirmCb:function(){o.a.ajaxPost(r.a.dealmodule,{id:e,state:2,userid:s},function(t){console.log(t.data),200===t.data.status&&t.data.data&&(a.$router.push("/mine/"+s),a.Message("删除成功","success"))})}}):"soldout"===t&&this.Confirm("是否确认确认下架?","提示",{confirmmessage:"下架成功",isShowMessage:!1,confirmCb:function(){o.a.ajaxPost(r.a.dealmodule,{id:e,state:4,userid:s},function(t){console.log(t.data),200===t.data.status&&t.data.data&&(a.$router.push("/mine/"+s),a.Message("下架成功","success"))})}})},attention:function(){var t=this,e=this.info.authid,s=this.$store.state.userid;o.a.ajaxPost(r.a.useropreate,{userid:s,state:5,attentionid:e},function(e){200===e.data.status&&e.data.data?(t.Message("关注成功","success"),t.info.isAttention=!0):t.Message(e.data.errmsg,"warning")})},quitAttention:function(){var t=this,e=this.info.authid,s=this.$store.state.userid;o.a.ajaxPost(r.a.useropreate,{userid:s,state:6,attentionid:e},function(e){200===e.data.status&&e.data.data?(t.Message("取消关注成功","success"),t.info.isAttention=!1):t.Message(e.data.errmsg,"warning")})},praise:function(){var t=this,e=[this.info.isPraise,this.$store.state.userid,this.info.id],s=e[1],a=e[2],i=e[3];i=e[0]?4:3,o.a.ajaxPost(r.a.useropreate,{id:a,state:i,userid:s},function(e){200===e.data.status&&e.data.data?3===i?(t.Message("点赞成功","success"),t.info.isPraise=!0,t.info.praisetotal=parseInt(t.info.praisetotal)+1):(t.Message("取消点赞成功","success"),t.info.isPraise=!1,t.info.praisetotal=parseInt(t.info.praisetotal)-1):t.Message(e.data.errmsg,"warning")})},collect:function(){var t=this,e=[this.info.isCollect,this.$store.state.userid,this.info.id],s=e[1],a=e[2],i=e[3];i=e[0]?2:1,o.a.ajaxPost(r.a.useropreate,{id:a,state:i,userid:s},function(e){200===e.data.status&&e.data.data?1===i?(t.Message("收藏成功","success"),t.info.isCollect=!0):(t.Message("取消收藏成功","success"),t.info.isCollect=!1):t.Message(e.data.errmsg,"warning")})}}),mounted:function(){var t=this,e=this.$route.params.id,s=void 0;if(s=localStorage?localStorage.getItem("modelUserid"):this.$store.state.userid,!e)return this.$route.push("/404"),!1;o.a.ajaxPost(r.a.getmodule,{id:e,state:1,type:3,userid:s},function(e){t.modelInfo={modelsrc:e.data.data.modelsrc,mimetype:e.data.data.mimetype},t.info=e.data.data,t.info.filetype=t.info.filetype.split("-"),t.fileTypeO=t.info.filetype[0],t.fileTypeT=t.info.filetype[1],t.commentinfo.id=t.info.id,t.commentinfo.authid=t.info.authid,t.setResourceid(t.info.id),t.setResourcetitle(t.info.title),t.setResourceAuthid(t.info.authid)})}},x={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"show-work"}},[s("section",{staticClass:"fl"},[s("model",{attrs:{childModelInfo:t.modelInfo}})],1),t._v(" "),s("aside",{staticClass:"fr"},[s("section",[s("div",{staticClass:"author-detail clear"},[s("router-link",{attrs:{to:{path:"/author/"+t.info.authid}}},[s("div",{staticClass:"author-headportrait fl"},[s("img",{attrs:{src:t.info.headportrait,alt:"",onerror:"javascript:this.src=window.errorImg"}})])]),t._v(" "),s("div",{staticClass:"author-middle fl"},[s("router-link",{attrs:{to:{path:"/author/"+t.info.authid}}},[s("div",{staticClass:"author-name"},[t._v(t._s(t.info.name))])]),t._v(" "),this.$store.state.userid==t.info.authid?s("div",[s("span",[t._v(t._s(t.info.attentionme)+"粉丝")])]):s("div",[t.info.isAttention?s("el-button",{staticClass:"author-attention",attrs:{type:"primary"},on:{click:t.quitAttention}},[t._v("已关注")]):s("el-button",{staticClass:"author-attention",attrs:{type:"primary"},on:{click:t.attention}},[t._v("关注")])],1)],1),t._v(" "),this.$store.state.userid==t.info.authid?s("div",{staticClass:"author-right fr"},[s("el-dropdown",{on:{command:t.handleCommand}},[s("span",{staticClass:"el-dropdown-link img icon8"}),t._v(" "),s("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[s("el-dropdown-item",{attrs:{command:"delete"}},[t._v("删除")]),t._v(" "),s("el-dropdown-item",{attrs:{command:"soldout"}},[t._v("下架")])],1)],1)],1):t._e()],1),t._v(" "),s("hr"),t._v(" "),s("div",{staticClass:"person-oprate"},[s("button",{class:[{hasDone:t.info.isPraise},"praise"],on:{click:t.praise}},[s("span",{staticClass:"iconfont icon-dianzan"}),t._v(" "),s("span",[t._v(t._s(t.info.praisetotal))])]),t._v(" "),s("button",{class:[{hasDone:t.info.isCollect},"collect"],on:{click:t.collect}},[s("span",{staticClass:"iconfont icon-shoucang"}),t._v(" "),t.info.isCollect?s("span",[t._v("已收藏")]):s("span",[t._v("收藏")])]),t._v(" "),s("button",{staticClass:"down"},[s("span",{staticClass:"iconfont icon-xiazai"}),t._v(" "),s("a",{attrs:{href:t.info.modelsrc,download:""}},[s("span",[t._v("下载")])])]),t._v(" "),t._m(0)]),t._v(" "),s("hr"),t._v(" "),s("div",{staticClass:"work-describle"},[s("div",{staticClass:"work-name"},[t._v(t._s(t.info.title))]),t._v(" "),s("div",[t._v(t._s(t.info.publishtime)+"发布")]),t._v(" "),s("div",{staticClass:"work-introduce ellipsis"},[t._v(t._s(t.info.desc))]),t._v(" "),t._m(1),t._v(" "),s("div",[s("div",{staticClass:"inB"},[s("span",{staticClass:"img icon4"}),t._v(" "),s("span",[t._v(t._s(t.fileTypeO))])]),t._v(" "),s("div",{staticClass:"inB"},[s("span",{staticClass:"img icon2"}),t._v(" "),s("span",[t._v(t._s(t.fileTypeT))])])]),t._v(" "),s("div",[s("div",{staticClass:"work-num inB"},[s("span",{staticClass:"img icon9"}),t._v(" "),s("span",[t._v(t._s(t.info.praisetotal))])]),t._v(" "),s("div",{staticClass:"work-num inB"},[s("span",{staticClass:"img icon10"}),t._v(" "),s("span",[t._v(t._s(t.info.collecttotal))])]),t._v(" "),s("div",{staticClass:"work-num inB"},[s("span",{staticClass:"img icon3"}),t._v(" "),s("span",[t._v(t._s(t.info.looktotal))])])])]),t._v(" "),s("hr")]),t._v(" "),s("comment",{attrs:{commentinfo:t.commentinfo}})],1)])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("button",{staticClass:"share"},[e("span",{staticClass:"iconfont icon-31fenxiang"}),this._v(" "),e("span",[this._v("分享")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("span",{staticClass:"img icon7"}),this._v(" "),e("strong",[this._v("作品版权归作者所有，他人不得以任何方式使用")])])}]};var b=s("VU/8")(w,x,!1,function(t){s("lKwB")},"data-v-32873714",null);e.default=b.exports},RqPp:function(t,e){},"f/TE":function(t,e){},jL5U:function(t,e){},lKwB:function(t,e){},n618:function(t,e,s){t.exports=s.p+"static/img/logo.42adf1f.png"},tn5I:function(t,e,s){"use strict";var a={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"model"}},["fbx"==this.childModelInfo.mimetype?e("iframe",{attrs:{src:"http://www.manykit.com/model/static/model/fbx/index.html",frameborder:"0","data-src":this.childModelInfo.modelsrc,id:"modeliframe"}}):this._e(),this._v(" "),"stl"==this.childModelInfo.mimetype?e("iframe",{attrs:{src:"http://www.manykit.com/model/static/model/stl/index.html",frameborder:"0","data-src":this.childModelInfo.modelsrc,id:"modeliframe"}}):this._e()])},staticRenderFns:[]};var i=s("VU/8")({props:["childModelInfo"],data:function(){return{}}},a,!1,function(t){s("jL5U")},"data-v-47cefc93",null);e.a=i.exports},zac6:function(t,e){}});
//# sourceMappingURL=1.f7142c5cf354938d7358.js.map