webpackJsonp([3],{Tx2D:function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var s=e("c/Tr"),i=e.n(s),o=e("pFYg"),n=e.n(o),l=e("Dd8w"),d=e.n(l),r=e("Prqi"),c=e("W7vi"),u=e("NYxO"),m=(e("YtJ0"),{name:"MyHome",data:function(){return{activeName:"all",imageUrl:"",user:{},allModules:[],myCollect:[]}},methods:d()({},Object(u.b)(["changedialogUpload"]),{handleClick:function(t,a){var e=this;console.log(t.name),"all"===t.name||"mycollect"===t.name&&r.a.ajaxPost(c.a.userinfo,{userid:this.user.id,getinfostate:3},function(t){200===t.data.status&&(console.log(t.data),e.myCollect=t.data.data)})},handleAvatarSuccess:function(t,a){this.imageUrl=URL.createObjectURL(a.raw)},beforeAvatarUpload:function(t){var a="image/jpeg"===t.type,e=t.size/1024/1024<2;return a||this.$message.error("上传头像图片只能是 JPG 格式!"),e||this.$message.error("上传头像图片大小不能超过 2MB!"),a&&e},editSet:function(){this.user.userid;this.$router.push("/setting")},attention:function(){var t=this,a=this.user.id,e=this.$store.state.userid;r.a.ajaxPost(c.a.useropreate,{userid:e,state:5,attentionid:a},function(a){200===a.data.status&&a.data.data?(t.Message("关注成功","success"),t.user.isAttention=!0):t.Message(a.data.errmsg,"warning")})},quitAttention:function(){var t=this,a=this.user.id,e=this.$store.state.userid;r.a.ajaxPost(c.a.useropreate,{userid:e,state:6,attentionid:a},function(a){200===a.data.status&&a.data.data?(t.Message("取消关注成功","success"),t.user.isAttention=!1):t.Message(a.data.errmsg,"warning")})},uploadMaterial:function(){this.$store.state.userid?this.changedialogUpload():this.Alert("请登录后上传作品","提示",{text:"确定",type:"info",message:"请登录后上传作品"})},handNoPublish:function(t){var a=this,e=this.$store.state.userid;7===t.state?r.a.ajaxPost(c.a.useropreate,{userid:e,state:t.state,id:t.id},function(e){200===e.data.status&&e.data.data&&(a.Message("发布成功","success"),a.allModules[t.index].state=1)}):2===t.state&&this.Confirm("确定删除这个作品嘛?","提示",{confirmCb:function(){var a=this;r.a.ajaxPost(c.a.dealmodule,{userid:e,state:t.state,id:t.id},function(e){200===e.data.status&&e.data.data&&(a.Message("删除成功","success"),a.allModules[t.index].state=2)})},isShowMessage:!1})},handHasPublish:function(t){var a=this;console.log(n()(t.state));var e=this.$store.state.userid;4===t.state?r.a.ajaxPost(c.a.dealmodule,{userid:e,state:t.state,id:t.id},function(e){200===e.data.status&&e.data.data&&(a.Message("下架成功","success"),a.allModules[t.index].state=0)}):2===t.state&&this.Confirm("确定删除这个作品嘛?","提示",{confirmCb:function(){var a=this;r.a.ajaxPost(c.a.dealmodule,{userid:e,state:t.state,id:t.id},function(e){200===e.data.status&&e.data.data&&(a.Message("删除成功","success"),a.allModules[t.index].state=2)})},isShowMessage:!1})},handHasCollect:function(t,a){var e=this,s=this.$store.state.userid;2===t.state&&r.a.ajaxPost(c.a.useropreate,{userid:s,state:t.state,id:t.id},function(a){200===a.data.status&&a.data.data&&(e.Message("取消收藏成功","success"),e.myCollect.splice(t.index,1),e.user.mycollect3D-=1)})}}),mounted:function(){var t=this,a=this.$route.params.id;r.a.ajaxPost(c.a.userinfo,{userid:a,getinfostate:2},function(a){200===a.data.status&&(t.user=a.data.data.user,i()(a.data.data.data,function(t){return t.modelimg||(t.modelimg="null"),t}),t.allModules=a.data.data.data,t.user.headportrait||(t.user.headportrait="/res/static/img/logo.42adf1f.png"))})}}),v={render:function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{attrs:{id:"my-home"}},[s("div",{staticClass:"my-home-wrapper"},[s("div",{staticClass:"personal-info"},[s("div",{staticClass:"mh-image fl"},[s("img",{attrs:{src:t.user.headportrait,alt:""}})]),t._v(" "),s("div",{staticClass:"author-info fl"},[s("div",[s("div",{staticClass:"author-name"},[t._v(t._s(t.user.username))]),t._v(" "),s("span",[t._v(t._s(t.user.attentionme3D)+"粉丝")]),t._v(" "),s("span",[t._v(t._s(t.user.myattention3D)+"关注")])]),t._v(" "),s("div",[t._v(t._s(t.user.aboutme))]),t._v(" "),this.$store.state.userid==t.user.id?s("el-button",{staticClass:"blockbutton",on:{click:t.editSet}},[t._v("编辑")]):t.user.isAttention?s("el-button",{staticClass:"blockbutton",on:{click:t.quitAttention}},[t._v("取消关注")]):s("el-button",{staticClass:"blockbutton",on:{click:t.attention}},[t._v("关注Ta")]),t._v(" "),t._l(t.user.mytags,function(a,e){return s("div",{key:e,staticClass:"author-tag inB"},[s("el-tag",[t._v(t._s(a))])],1)})],2)])]),t._v(" "),s("div",{staticClass:"my-work-menu"},[s("el-tabs",{on:{"tab-click":t.handleClick},model:{value:t.activeName,callback:function(a){t.activeName=a},expression:"activeName"}},[s("el-tab-pane",{attrs:{label:" 全部作品("+t.allModules.length+") ",name:"all"}}),t._v(" "),s("el-tab-pane",{attrs:{label:" 我的收藏("+t.user.mycollect3D+") ",name:"mycollect"}})],1)],1),t._v(" "),s("div",["all"===t.activeName?s("div",{staticClass:"my-work"},[s("p",[t._v("我的草稿")]),t._v(" "),s("el-row",{ref:"list",staticClass:"row-bg",attrs:{type:"flex",justify:"space-between"}},[s("el-col",{staticClass:"img_single"},[s("div",{staticClass:"avatar-uploader",on:{click:t.uploadMaterial}},[s("div",{staticClass:"el-upload el-upload--text"},[s("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])])]),t._v(" "),t._l(t.allModules,function(a,e){return 0===a.state?s("el-col",{key:e,staticClass:"img_single"},[s("div",{staticClass:"grid-content"},[s("img",{attrs:{src:a.modelimg,alt:"",onerror:"javascript:this.src=window.errorImg"}})]),t._v(" "),s("div",{directives:[{name:"moduleHover",rawName:"v-moduleHover"}],staticClass:"bachover",on:{click:function(e){t.$router.push({path:"/model/draft/"+a.id})}}}),t._v(" "),s("div",{directives:[{name:"moduleShow",rawName:"v-moduleShow"}],staticClass:"moduleAuthor"},[s("div",{staticClass:"module_title fl"},[t._v(t._s(a.title))]),t._v(" "),s("el-dropdown",{staticClass:"fr",on:{command:t.handNoPublish}},[s("span",{staticClass:"el-dropdown-link iconfont icon-31shezhi"}),t._v(" "),s("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[s("el-dropdown-item",{attrs:{command:{state:7,id:a.id,index:e}}},[t._v("发布")]),t._v(" "),s("el-dropdown-item",[s("router-link",{attrs:{to:{path:"/model/draft/"+a.id}}},[t._v("编辑")])],1),t._v(" "),s("el-dropdown-item",{attrs:{command:{state:2,id:a.id,index:e}}},[t._v("删除")])],1)],1)],1)]):t._e()}),t._v(" "),s("span",{staticStyle:{display:"inline",width:"380px",height:"0",border:"none"}}),t._v(" "),s("span",{staticStyle:{display:"inline",width:"380px",height:"0",border:"none"}})],2)],1):t._e(),t._v(" "),"all"===t.activeName?s("div",{staticClass:"my-work"},[s("p",[t._v("已发布作品")]),t._v(" "),s("el-row",{ref:"",staticClass:"row-bg",attrs:{type:"flex",justify:"space-between"}},[t._l(t.allModules,function(a,e){return 1===a.state?s("el-col",{key:e,staticClass:"img_single"},[s("div",{staticClass:"grid-content"},[s("img",{attrs:{src:a.modelimg,alt:"",onerror:"javascript:this.src=window.errorImg"}})]),t._v(" "),s("div",{directives:[{name:"moduleHover",rawName:"v-moduleHover"}],staticClass:"bachover",on:{click:function(e){t.$router.push({path:"/model/detail/"+a.id})}}}),t._v(" "),s("div",{directives:[{name:"moduleShow",rawName:"v-moduleShow"}],staticClass:"moduleAuthor"},[s("div",{staticClass:"module_title fl"},[t._v(t._s(a.title))]),t._v(" "),s("el-dropdown",{staticClass:"fr",on:{command:t.handHasPublish}},[s("span",{staticClass:"el-dropdown-link iconfont icon-31shezhi"}),t._v(" "),s("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[s("el-dropdown-item",{attrs:{command:{state:4,id:a.id,index:e}}},[t._v("下架")]),t._v(" "),s("el-dropdown-item",{attrs:{command:{state:2,id:a.id,index:e}}},[t._v("删除")])],1)],1)],1)]):t._e()}),t._v(" "),s("span",{staticStyle:{display:"inline",width:"380px",height:"0",border:"none"}}),t._v(" "),s("span",{staticStyle:{display:"inline",width:"380px",height:"0",border:"none"}})],2)],1):t._e(),t._v(" "),"mycollect"===t.activeName?s("div",{staticClass:"my-work"},[s("el-row",{ref:"",staticClass:"row-bg",attrs:{type:"flex",justify:"space-between"}},[t._l(t.myCollect,function(a,i){return 1===a.state?s("el-col",{key:i,staticClass:"img_single"},[s("div",{staticClass:"grid-content"},[s("img",{attrs:{src:e("zVNJ"),alt:""}})]),t._v(" "),s("div",{directives:[{name:"moduleHover",rawName:"v-moduleHover"}],staticClass:"bachover",on:{click:function(e){t.$router.push({path:"/model/detail/"+a.id})}}}),t._v(" "),s("div",{directives:[{name:"moduleShow",rawName:"v-moduleShow"}],staticClass:"moduleAuthor"},[s("div",{staticClass:"module_title fl"},[t._v(t._s(a.title))]),t._v(" "),s("el-dropdown",{staticClass:"fr",on:{command:t.handHasCollect}},[s("span",{staticClass:"el-dropdown-link iconfont icon-gengduo"}),t._v(" "),s("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[s("el-dropdown-item",{attrs:{command:{state:2,id:a.id,index:i}}},[t._v("取消收藏")])],1)],1)],1)]):t._e()}),t._v(" "),s("span",{staticStyle:{display:"inline",width:"380px",height:"0",border:"none"}}),t._v(" "),s("span",{staticStyle:{display:"inline",width:"380px",height:"0",border:"none"}})],2)],1):t._e()])])},staticRenderFns:[]};var h=e("VU/8")(m,v,!1,function(t){e("kRgY"),e("tJ5y")},"data-v-1d1437fe",null);a.default=h.exports},kRgY:function(t,a){},tJ5y:function(t,a){},zVNJ:function(t,a,e){t.exports=e.p+"static/img/imglist1.389739e.png"}});
//# sourceMappingURL=3.e89442509af435ec78b7.js.map